
<button class="menu-btn" onclick="toggleSidebar()" aria-label="Open Menu">MENU &#9662;</button>

<div id="mySidebar" class="sidebar-mobile">
    <a href="javascript:void(0)" class="close-btn" onclick="toggleSidebar()">&times;</a>
    
    {% assign main_links = site.data.navigation | where: "section", "main" %}
    {% for item in main_links %}
        <a href="{{ item.link | relative_url }}" {% if item.name == "CV" %}target="_blank" rel="noopener noreferrer"{% endif %}>
            {{ item.name }}
        </a>
    {% endfor %}
</div>

<nav class="navbar">
    <div class="container">
        <a href="https://github.com/THMSCMPG/" class="logo" target="_blank" rel="noopener noreferrer">
            <i class="fas fa-bolt-lightning"></i> THMSCMPG
        </a>
        
        <ul class="nav-links">
            {% assign main_links = site.data.navigation | where: "section", "main" %}
            {% for item in main_links %}
            <li>
                <a href="{{ item.link | relative_url }}" {% if item.name == "CV" %}target="_blank" rel="noopener noreferrer"{% endif %}>
                    {{ item.name }}
                </a>
            </li>
            {% endfor %}

            <li class="dropdown">
                <span class="nav-label">Jump to Docs</span>
                <a href="javascript:void(0)" class="dropbtn"><i class="fas fa-bars"></i></a>
                <div class="dropdown-content">
                    {% assign doc_links = site.data.navigation | where: "section", "docs" %}
                    {% for item in doc_links %}
                        <a href="{{ item.link | relative_url }}">{{ item.name }}</a>
                    {% endfor %}
                </div>
            </li>
        </ul>
    </div>
</nav>

<script>
         // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                if(this.getAttribute('href').startsWith('#') && this.getAttribute('href').length > 1) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        // Update active state in peek nav
                        document.querySelectorAll('.peek-nav a').forEach(a => a.classList.remove('active'));
                        this.classList.add('active');
                    }
                }
            });
        });

        function toggleSidebar() {
            const sidebar = document.getElementById("mySidebar");
            // Check if the sidebar is open (250px) or closed (0)
            if (sidebar.style.width === "250px") {
                sidebar.style.width = "0";
            } else {
                sidebar.style.width = "250px";
            }
        }
    </script>