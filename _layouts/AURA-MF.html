<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} | AURA-MF</title>
    
    <!-- Centralized Middend CSS -->
    <link rel="stylesheet" href="https://thmscmpg.github.io/backend-hub/_sass/style.css">
    
    <!-- KaTeX for Mathematical Rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <!-- External Libraries via CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

    <button class="menu-btn" onclick="toggleSidebar()">MENU &#9662;</button>

    <div id="mySidebar" class="sidebar-mobile">
        <a href="javascript:void(0)" class="close-btn" onclick="toggleSidebar()">&times;</a>
        {% assign main_links = site.data.navigation | where: "section", "main" %}
        {% for item in main_links %}
            <a href="{{ item.link }}" {% if item.name == "CV" %}target="_blank"{% endif %}>{{ item.name }}</a>
        {% endfor %}
        
        {% assign landing = site.data.navigation | where: "name", "Landing" | first %}
        <a href="{{ landing.link }}">{{ landing.name }}</a>
    </div>
    
    <nav class="navbar">
        <div class="container">
            <a href="https://github.com/THMSCMPG/" class="logo" target="_blank">
                <i class="fas fa-bolt-lightning"></i> THMSCMPG
            </a>
            <ul class="nav-links">
                {% assign main_links = site.data.navigation | where: "section", "main" %}
                {% for item in main_links %}
                    <li><a href="{{ item.link }}" {% if item.name == "CV" %}target="_blank"{% endif %}>{{ item.name }}</a></li>
                {% endfor %}
                
                {% assign landing = site.data.navigation | where: "name", "Landing" | first %}
                <li><a href="{{ landing.link }}">{{ landing.name }}</a></li>
                
                <li class="dropdown">
                    <span class="nav-label">Jump to Docs</span>
                    <a href="javascript:void(0)" class="dropbtn"><i class="fas fa-bars"></i></a>
                    <div class="dropdown-content">
                        {% assign doc_links = site.data.navigation | where: "section", "docs" %}
                        {% for item in doc_links %}
                            <a href="{{ item.link }}">{{ item.name }}</a>
                        {% endfor %}
                    </div>
                </li>
            </ul>
        </div>
    </nav>
    
    <div class="trigger-zone"></div> 
    
    <nav class="peek-nav">
        {% assign landing = site.data.navigation | where: "name", "Landing" | first %}
        <h2><a href="{{ landing.link }}">AURA-MF Menu</a></h2>
        <ul>
            <li><a href="#overview" class="active">Overview</a></li>
            <li><a href="#architecture">Architecture</a></li>
            <li><a href="#simulations">Simulations</a>
                <ul>
                    {% assign research_links = site.data.navigation | where: "section", "research" %}
                    {% for item in research_links %}
                        {% if item.name contains "Sim" %}
                            <li><a href="{{ item.link }}">{{ item.name }}</a></li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </li>
            <li><a href="#performance">Performance</a></li>
            <li><a href="#downloads">Downloads</a></li>
            
            {% assign dash = site.data.navigation | where: "name", "Dash" | first %}
            <li><a href="{{ dash.link }}">{{ dash.name }}</a></li>
        </ul>
    </nav>

    <main class="container">
        <header class="page-header">
            <h1>{{ page.title }}</h1>
        </header>

        <article class="content-area">
            {{ content }}
        </article>

        {% if site.includes_enabled %}
            {% include contact_form.html %}
        {% endif %}
    </main>

    <footer class="footer">
        <p>Thomas Campagna | Physics & Mathematics</p>
        <p>&copy; 2025 AURA-MF Project</p>
        <p>&copy; 2026 CircuitNotes Project</p>
        <p style="font-size: 0.8rem;">Licensed under the MIT License.</p>
        <a href="https://github.com/THMSCMPG" target="_blank"><i class="fab fa-github"></i> GitHub</a>
    </footer>
    
    <!-- Backend Bridge iframe for contact form and physics API communication -->
    <iframe 
        id="backend-bridge" 
        src="https://thmscmpg.github.io/backend-hub" 
        style="display:none; width:0; height:0; border:0;"
        aria-hidden="true">
    </iframe>

    <script>
        // Mobile sidebar toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('mySidebar');
            sidebar.classList.toggle('open');
            document.body.classList.toggle('sidebar-open');
        }

        // KaTeX Auto-render for mathematical expressions
        document.addEventListener("DOMContentLoaded", function() {
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "$", right: "$", display: false}
                    ]
                });
            }
        });
    </script>
</body>    
</html>
